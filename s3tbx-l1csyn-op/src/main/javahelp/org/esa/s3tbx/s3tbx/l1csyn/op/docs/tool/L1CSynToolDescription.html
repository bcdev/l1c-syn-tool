<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>SNAP Help - Sentinel-3 OLCI/SLSTR L1C SYN Tool</title>
    <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
    <link rel="stylesheet" href="../style.css">
</head>

<p>

<table class="header">
    <tr class="header">
        <td class="header">&nbsp;
            Sentinel-3 L1C SYN Tool
        </td>
        <td class="header" align="right"><a
                href="nbdocs://org.esa.snap.snap.help/org/esa/snap/snap/help/docs/general/overview/SnapOverview.html">
            <img src="../images/S3MPC_header.png" border=0></a>
        </td>
    </tr>
</table>

<h2>Sentinel-3 L1C Synergy Tool</h2>

<h3>Introduction</h3>
<p>The current Sentinel 3 ground segment includes a synergy branch where Level 1b data from two instruments onboard
    Sentinel 3, namely OLCI and SLSTR, are commonly processed to a Level 2 product, containing aerosol and surface
    reflectance data.</p>
<p>User demand showed that there is an additional need to obtain a product where the two Level 1b data streams
    (TOA radiances or reflectances) are merged and collocated, and which allows them an individual Level 2 processing.
    This product shall be called Level 1C SYN.</p>
<table>
    <tr>
        <td><p align="centre"><img src="../images/Logo_S3-MPC.png" /></p></td>
        <td><p align="centre"><img src="../images/S3MPC-Disclaimer.png" /></p></td>
    </tr>
</table>

<h3>Usage within SNAP Desktop</h3>

<h4>I/O Parameters</h4>
<p align="center"><img src="../images/IOParameters.png"></p>
<h5>OLCI Product</h5>
Select an OLCI product on which the SLSTR product will be collocated.
<h5>SLSTR Product</h5>
Select a SLSTR product which will be collocated with the OLCI product.<br>

<h5>Target Product</h5>
The target product is currently always provided on the WGS84 CRS.<br>
<b>Name:</b> to specify the name of the target product.<br>
<b>Save as:</b> checkbox to specify whether the target product should be saved to the file system. The combo box
presents a list of available file formats. The text field or the button next to it allow to specify a target
directory.<br>
<b>Open in SNAP:</b> Used to specify whether the target product should be opened in the Sentinel Toolbox. When the
target product is not saved, it is opened in the Sentinel Toolbox automatically.
<br>


<h3>Processing Parameters</h3>
<p align="center"><img src="../images/ProcessingParameters.png"></p>
<h5>Keep final project on OLCI image grid</h5>
If this parameter is set to "true" then no further reprojection will be performed and L1C product will be projected onto OLCI image grid.
In this case value from Reprojection CRS option will not be used. 'False' is default value.

<h5>Resampling upsampling method</h5>
The method used for interpolation (upsampling to a finer resolution).

<h5>Reprojection CRS</h5>
Coordinate reference system to which L1C product will be reprojected. If set to "none", no reprojection will be made. Default value is EPSG:4326.
If user set "Keep final project on OLCI image grid" parameter to true, this option will not be used.

<h5>OLCI raster data</h5>
Predefined regular expressions for selection of OLCI bands in L1C product. Multiple values selection is possible.
Values must be one of 'All', 'Oa.._radiance', 'FWHM_band_.*', 'lambda0_band_.*', 'solar_flux_band_.*', 'quality_flags.*', 'atmospheric_temperature_profile_.*', 'TP_.*', 'horizontal_wind.*', 'total_.*', 'humidity', 'sea_level_pressure', 'O.*A', 'S.*A'.
If 'All' is selected then all OLCI bands will be written to L1C product. 'All' is the default value.

<h5>SLSTR raster data</h5>
Predefined regular expressions for selection of SLSTR bands in L1C product. Multiple values selection is possible.
Values must be one of 'All', 'F._BT_.*', 'S._BT_.*', 'S*._radiance_an', '.*_an.*', '.*_ao.*', '.*_bn.*', '.*_bo.*', '.*_bn.*', '.*_co.*', '.*_cn.*', '.*_tn.*', '.*_tx.*'.
If 'All' is selected then all SLSTR bands will be written to L1C product. 'All' is the default value.

<h5>Regular expressions for OLCI bands</h5>
Regular expressions for selection of OLCI bands in L1C product. Values must follow JAVA rules for the regular expessions. Values must be separated by commas. If 'All' is specified then all OLCI bands will be written to L1C product.

<h5>Regular expressions for SLSTR bands</h5>
Regular expressions for selection of SLSTR bands in L1C product. Values must follow JAVA rules for the regular expessions. Values must be separated by commas. If 'All' is specified then all SLSTR bands will be written to L1C product.


<h5>Shapefile</h5>
Optional shapefile with which user specify the region of subset. This option has priority over "WKT region" option.

<h5>WKT region</h5>
The subset region in geographical coordinates using WKT-format, e.g. POLYGON((&lt;lon1&gt; &lt;lat1&gt;, &lt;lon2&gt; &lt;lat2&gt;, ..., &lt;lon1&gt; &lt;lat1&gt;))
(make sure to quote the option due to spaces in &lt;geometry&gt;). If not given, the entire scene is used. Shapefile option has priority over this option.

<!--<h5>MISR file</h5>
Optional MISR product, which contains information for the pixelwise collocation of OLCI and SLSTR bands. If not given, default collocation will be performed.
Additional mask named "MISR pixel applied" identifying duplicated pixels will be added to L1C product.

<h5>Duplication</h5>
After applying collocation using MISR product some pixels of SLSTR bands in L1C product does not have defined value. If this flag set to true, these pixels will be filled with the value of nearest left non-zero pixel.
Additional mask named "Duplicated pixel after MISR" identifying duplicated pixels will be added to L1C product.

<h5>Full MISR</h5>
By default, when calculating collocation between SLSTR and OLCI bands using MISR product, the mapping between Oa17_radiance OLCI band and S3 SLSTR band is calculated.
If this option set to true individual mapping for each SLSTR band is calculated. By default this option is set to 'False'.
-->
<h3>Usage from the command line</h3>
By invoking gpt with name "L1CSYN" of the tool (operator) and the option <b>-h</b> the specific help for this L1C SYN
tool is shown. For general information on processing with GPF please see the <a
        href="nbdocs://org.esa.snap.snap.gpf.ui/org/esa/snap/core/gpf/docs/gpf/GpfOverview.html">GPF Overview</a> page.

<pre>
> gpt L1CSYN -h
Usage:
  gpt L1CSYN [options] 

Description:
  Sentinel-3 OLCI/SLSTR L1C SYN Tool


Source Options:
  -SolciProduct=&lt;file&gt;     OLCI source product
                           This is a mandatory source.
  -SslstrProduct=&lt;file&gt;    SLSTR source product
                           This is a mandatory source.

Parameter Options:
  -PbandsOlci=&lt;string,string,string,...&gt;     Predefined regular expressions for selection of OLCI bands in the output product. Multiple selection is possible.
                                             Value must be one of 'All', 'Oa.._radiance', 'FWHM_band_.*', 'lambda0_band_.*', 'solar_flux_band_.*', 'quality_flags.*', 'atmospheric_temperature_profile_.*', 'TP_.*', 'horizontal_wind.*', 'total_.*', 'humidity', 'sea_level_pressure', 'O.*A', 'S.*A'.
                                             Default value is 'All'.
  -PbandsSlstr=&lt;string,string,string,...&gt;    Predefined regular expressions for selection of OLCI bands in the output product. Multiple selection is possible.
                                             Value must be one of 'All', 'F._BT_.*', 'S._BT_.*', 'S*._radiance_an', '.*_an.*', '.*_ao.*', '.*_bn.*', '.*_bo.*', '.*_bn.*', '.*_co.*', '.*_cn.*','*_fn.*', '*_fo.*', '.*_tn.*', '.*_tx.*'.
                                             Default value is 'All'.
  -PgeoRegion=&lt;string&gt;                       The subset region in geographical coordinates using WKT-format,
                                             e.g. POLYGON((&lt;lon1&gt; &lt;lat1&gt;, &lt;lon2&gt; &lt;lat2&gt;, ..., &lt;lon1&gt; &lt;lat1&gt;))
                                             (make sure to quote the option due to spaces in &lt;geometry&gt;).
                                             If not given, the entire scene is used.
  -PolciRegexp=&lt;string&gt;                      Regular expressions (comma-separated) to set up selection of OLCI bands. It has priority over OLCI raster data selection. Will not be considered if empty
  -PstayOnOlciGrid=&lt;boolean&gt;                 If this parameter is set to true, the final product will be provided on the OLCI image grid. Default value is 'False'.
  -PreprojectionCRS=&lt;string&gt;                 The CRS used for the reprojection. If set to None or left empty, no reprojection will be performed.
                                             Default value is 'EPSG:4326'.
  -PshapeFile=&lt;file&gt;                         Optional file which may be used for selecting subset. This has priority over WKT GeoRegion.
  -PslstrRegexp=&lt;string&gt;                     Regular expressions (comma-separated) to set up selection of SLSTR bands. It has priority over SLSTR raster data selection. Will not be considered if empty
  -Pupsampling=&lt;string&gt;                      The method used for interpolation (upsampling to a finer resolution).
                                             Value must be one of 'Nearest', 'Bilinear', 'Bicubic'.
                                             Default value is 'Nearest'.
    <!--
  -PMISRFile=&lt;file&gt;                          Optional MISR product, which is used to collocate SLSTR and OLCI bands.
  -Pduplicate=&lt;boolean&gt;                      If set to true, after collocation using MISR product, all empty pixels will be filled with the values of its nearest left non-zero neighboring pixel.
                                             This option will work only with MISR product.
                                             Default value is 'False'.
  -PfullMISR=&lt;boolean&gt;                       If set to true, collocation of every SLSTR band will be calculated separately, using correspoing MISR bands.
                                             This option will work only with MISR product.
                                             Default value is 'False'.
-->
Graph XML Format:
  &lt;graph id="someGraphId"&gt;
    &lt;version&gt;1.0&lt;/version&gt;
    &lt;node id="someNodeId"&gt;
      &lt;operator&gt;L1CSYN&lt;/operator&gt;
      &lt;sources&gt;
        &lt;olciProduct&gt;${olciProduct}&lt;/olciProduct&gt;
        &lt;slstrProduct&gt;${slstrProduct}&lt;/slstrProduct&gt;
      &lt;/sources&gt;
      &lt;parameters&gt;
        &lt;stayOnOlciGrid&gt;false&lt;/stayOnOlciGrid&gt;
        &lt;upsampling&gt;string&lt;/upsampling&gt;
        &lt;reprojectionCRS&gt;string&lt;/reprojectionCRS&gt;
        &lt;bandsOlci&gt;string,string,string,...&lt;/bandsOlci&gt;
        &lt;bandsSlstr&gt;string,string,string,...&lt;/bandsSlstr&gt;
        &lt;olciRegexp&gt;string&lt;/olciRegexp&gt;
        &lt;slstrRegexp&gt;string&lt;/slstrRegexp&gt;
        &lt;shapeFile&gt;file&lt;/shapeFile&gt;
        &lt;geoRegion&gt;string&lt;/geoRegion&gt;
        <!--&lt;MISRFile&gt;file&lt;/MISRFile&gt;
        &lt;duplicate&gt;false&lt;/duplicate&gt;
        &lt;fullMISR&gt;false&lt;/fullMISR&gt;-->
      &lt;/parameters&gt;
    &lt;/node&gt;
  &lt;/graph&gt;
</pre>

A complete command line call (on windows) might look like the following:

<pre>
> gpt L1CSYN -PbandsOlci="Oa.._radiance,FWHM_band_.*,lambda0_band_.*" -PbandsSlstr=".*_an.*,.*_tn.*,.*_tx.*" -t "c:\output\S3_L1C_SYN.nc" -SolciProduct="c:\input\S3A_OL_1_EFR____20170313T110342_20170313T110642_20170314T162839_0179_015_208_2520_LN1_O_NT_002.SEN3"
    -SslstrProduct="S3A_SL_1_RBT____20170313T110343_20170313T110643_20170314T172757_0179_015_208_2520_LN2_O_NT_002.SEN3"
</pre>


</body>
</html>